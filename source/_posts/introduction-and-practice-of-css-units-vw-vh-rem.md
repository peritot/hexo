---
title: CSS 单位 vw、vh、rem 简介及实践
date: 2019-02-12 10:30:00
tags: CSS
---

## 背景

在开发采集系统过程中，发现系统在 720p 分辨率的显示器上展现效果不佳。原因在于系统是以 1080p 分辨率为基础开发的，部件的大小都以 1080p 为基础来设定 px，导致低分辨率的显示器部分部件过大而挤压了其他部件的显示空间，从而导致如图表、列表等的空间过小。

![](./0.0.png)

![](./0.1.png)

上述页面下部分高度被挤压导致空间不够，展示的图表和列表都被挤压了。

后经过引入新的 CSS 单位 `vw`、`vh`、`rem` 解决了这个问题，效果如下。对比之后可发现，图表空间明显增大，列表展示数量由 4 个增到 8 个，优化了展示效果。

![](./0.2.png)

![](./0.3.png)

## 什么是 vw、vh、rem

| 单位 | 含义 |
| ---- |:------------------------------------:|
| rem  | 相对于根节点的字体大小                 |
| vw   | 视窗宽度的百分比，1vw 等于视窗宽度的 1% |
| vh   | 视窗高度的百分比，1vh 等于视窗高度的 1% |

### rem

首先需要了解 **em** 。

`em` 是相对单位，相对于父节点或者自身的字体大小。比如父节点定义了字体大小为 `font-size:10px` ，那么子节点如果定义 `1em` 就等于 `10px` ，`1.2em` 等于 `12px` 。

如果所有父节点都没有定义字体大小，会相对于根节点计算相对大小。

**rem** 则可以理解为特殊的 `em` ，因为它是始终相对于根节点的字体大小。文档中 `1em` 定义的大小是固定的，不会像 `em` 那样，依赖于父节点的字体大小而变化。

在实际使用中，通常结合 **Media Query** 来定义节点的字体大小，以此来达到网页字体自适应。

此单位完全兼容 IE11，无需担心网页兼容性。

![](./1.0.png)

### vw、vh

* `vw`，viewpoint width 的缩写，视窗宽度，1vw 等于视窗宽度的 1% 。
* `vh`，viewpoint height 的缩写，视窗高度，1vh 等于视窗高度的 1% 。

配套使用的两个单位： `vmin` 和 `vmax` 。

* `vmin`， `vw` 和 `vh` 中较小的。
* `vmax`， `vw` 和 `vh` 中较大的。

在实际使用中，通常用于定义节点的宽高。由于是百分比，自然能根据网页分辨率来自适应调整具体宽高。

网页兼容性上，除 `vmax` 不兼容 IE11 外，`vw`、`vh` 和 `vmin` 都完美兼容。

![](./1.1.png)

##  实践

### 字体大小

结合 **Media Query** 来定义节点根节点的字体大小。

``` CSS
@media (min-width: 1366px) {
    html {
        font-size: 12px !important;
    }
}

@media (min-width: 1920px) {
    html {
        font-size: 14px !important;
    }
}
```

定义根节点大小之后，其他节点则可以根据下述公式进行计算得出 `rem` 的值。

> rem = px / 14
>
> 注：标准设计稿以 1920*1080 分辨率为基准，故而选择 14px 为分母。

### 节点宽高

通常来说，节点则可以根据下述公式进行计算得出 `vw` 和 `vh` 的值。

> vw = px / 19.2
>
> vh = px / 10.8
>
> 注：标准设计稿以 1920*1080 分辨率为基准。

考虑到计算的便利性，可以对分母进行取整。

> vw = px / 20
>
> vh = px / 10

下面就典型实例就行说明。

#### padding、margin

元素的 `padding`、`margin` 通常设定为 `10px`，如下设定：

``` CSS
* {
    padding: 1vh;
    margin: 1vh;
}
```

此时不考虑使用 `vw` 单位（如 `padding:1vh 0.5vw`），可保证上下左右的相对相等。

#### Tab、Button

对于设定 `line-height:35px` 的 Tab、Button 等元素，如下设定：

``` CSS
tab,button {
    height: 3.5vh;
    line-height: 3.5vh;
}
```

则其实际值如下：

| 分辨率 | 值 | 备注 |
| ----------- |:----------------------:|:-------------------:|
| 1366*768    | 26.88px = 3.5 * 7.68px | 26.88px 与 25px 相近 |
| 1920*1080   | 37.8‬px = 3.5 * 10.8px  | 37.8px 与 35px 相近  |

可以看到，实际的值与标准的 `25px` 和 `35px` 相当接近，展示效果较好。

#### CheckBox、Img

对于 CheckBox 和 Img 等类似正方形的元素，使用 `vmin` 单位，可保证其保持正方形不变形。

``` CSS
CheckBox,Img {
    width: 6vmin;
    height: 6vmin;
}
```

#### 结合 min-width、max-width、min-height、max-height

某些元素，需要结合 `min-width`、`max-width`、`min-height`、`max-height` 等使用，防止元素过小过大。如 `input` 不能太段导致输入框可展示的文字太少，需要进行修正。

``` CSS
input {
    width: 5.5vw;
    min-width: 8rem;
    height: 100%;
}
```

## 结语

在前端页面开发中，灵活使用 `vw`、`vh`、`rem` 等单位，与 `flex`、`grid` 布局有机结合，能最大程度满足网页自适应的需求，需下功夫多多总结使用。
